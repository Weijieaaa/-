proxy-groups:  
  - name: "Auto"  
    type: select  
    proxies:  
      - { name: "DIRECT", type: direct }

rules:  
  - SCRIPT,https:\/\/gateway\.mashibing\.com\/edu-course\/(coursePackage\/app\/1|app\/systemCourse|courseWeb),mashibing.js,Auto  

script:  
  matchers:  
    - type: http-response  
      request:  
        url: "gateway\\.mashibing\\.com/edu-course/(coursePackage/app/1|app/systemCourse|courseWeb)"  
      script: |  
        const replaceAll = (str, find, replace) => str.split(find).join(replace);  
        
        let response = $response.body;  

        response = replaceAll(response, '"isTrial":false', '"isTrial":true');  
        response = replaceAll(response, '"shareState":0', '"shareState":1');  
        response = replaceAll(response, '"accredit":false', '"accredit":true');  
        response = response.replace(/"plateId":\s*\d+/g, '"plateId":0');  

        $done({ body: response });  

proxies:  
  - { name: "DIRECT", type: direct }
